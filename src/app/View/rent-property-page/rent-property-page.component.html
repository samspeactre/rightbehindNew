<app-banner>
  <div class="cstmContainer">
    <div class="row">
      <div class="col-lg-12">
        <div class="min75 dCenter flex-column w-100">
          <h1 class="text-center bigFont text-dark">Add New Property</h1>
          <div class="dCenter w-100">
            <a class="text-dark" routerLink="/">Home</a>
            <div class="slash">/</div>
            <a class="text-dark">Add New Property</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</app-banner>
<section>
  <div class="cstmContainer">
    <div class="row lower-portion mb-5">
      <div class="col-lg-3">
        <div class="left-portion">
          <button class="btnWhiteNBlueOutline mb-1 w-100 bold text-start"
            [ngClass]="{ active: section == 'property-information' }" (click)="scrollToSection('property-information')">
            Property Information
          </button>
          <br />
          <button class="btnWhiteNBlueOutline mb-1 w-100 bold text-start" [ngClass]="{ active: section == 'amenities' }"
            (click)="scrollToSection('amenities')">
            Amenities
          </button>
          <br />
          <button class="btnWhiteNBlueOutline mb-1 w-100 bold text-start" [ngClass]="{ active: section == 'utilities' }"
            (click)="scrollToSection('utilities')">
            Utilities
          </button>
          <br />
          <button class="btnWhiteNBlueOutline mb-1 w-100 bold text-start"
            [ngClass]="{ active: section == 'rent-special' }" (click)="scrollToSection('rent-special')">
            Rent Special
          </button>
          <br />
          <button class="btnWhiteNBlueOutline mb-1 w-100 bold text-start"
            [ngClass]="{ active: section == 'Pet-policy' }" (click)="scrollToSection('Pet-policy')">
            Pet Policy
          </button>
          <br />
          <button class="btnWhiteNBlueOutline mb-1 w-100 bold text-start" [ngClass]="{ active: section == 'laundry' }"
            (click)="scrollToSection('laundry')">
            Laundry
          </button>
          <br />
          <button class="btnWhiteNBlueOutline mb-1 w-100 bold text-start" [ngClass]="{ active: section == 'gallery' }"
            (click)="scrollToSection('gallery')">
            Gallery
          </button>
          <br />
          <button class="btnWhiteNBlueOutline mb-1 w-100 bold text-start" [ngClass]="{ active: section == 'videos' }"
            (click)="scrollToSection('videos')">
            Videos
          </button>
          <br />
          <button class="btnWhiteNBlueOutline mb-1 w-100 bold text-start"
            [ngClass]="{ active: section == 'contact-info' }" (click)="scrollToSection('contact-info')">
            Contact Information
          </button>
          <br />
          <button class="btnWhiteNBlueOutline mb-1 w-100 bold text-start"
            [ngClass]="{ active: section == 'description' }" (click)="scrollToSection('description')">
            Description
          </button>
          <br />
          <button class="btnWhiteNBlueOutline mb-1 w-100 bold text-start"
            [ngClass]="{ active: section == 'floor-plans' }" (click)="scrollToSection('floor-plans')">
            Floor Plans
          </button>
          <br />
          <button class="btnWhiteNBlueOutline mb-1 w-100 bold text-start" [ngClass]="{ active: section == 'location' }"
            (click)="scrollToSection('location')">
            Location
          </button>
        </div>
      </div>
      <div class="col-lg-9">
        <div class="right-portion prop">
          <form [formGroup]="propertyAddForm">
            <div id="property-information">
              <h2>Property Information</h2>
              <p class="right-portion-para">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit ut
                aliquam, purus sit amet luctus venenatis, lectus magna fringilla
                urna, porttitor.
              </p>
            </div>
            <div class="row">
              <mat-form-field class="col-lg-6">
                <mat-label>Property Type</mat-label>
                <mat-select formControlName="PropertyType">
                  @for (item of types; track item) {
                  <mat-option [value]="item?.value">{{
                    item?.name
                    }}</mat-option>
                  }
                </mat-select>
              </mat-form-field>
              <mat-form-field class="col-lg-6">
                <mat-label>Property Title</mat-label>
                <input matInput formControlName="Title" />
              </mat-form-field>
              @if(previousData?.active == 'rent'){
              <mat-form-field class="col-lg-4">
                <mat-label>Lease Lenght In Months</mat-label>
                <input matInput formControlName="LeaseMonth" />
              </mat-form-field>
              <mat-form-field class="col-lg-4">
                <mat-label>Monthly Rent</mat-label>
                <input matInput />
              </mat-form-field>
              <mat-form-field class="col-lg-4">
                <mat-label>Deposit</mat-label>
                <input matInput />
              </mat-form-field>
              }
              <mat-form-field class="col-lg-4">
                <mat-label>No. of Bedrooms</mat-label>
                <input matInput formControlName="NoOfBed" />
              </mat-form-field>
              <mat-form-field class="col-lg-4">
                <mat-label>No. of Bathrooms</mat-label>
                <input matInput formControlName="NoOfBath" />
              </mat-form-field>
              <mat-form-field class="col-lg-4">
                <mat-label>Sqft</mat-label>
                <input matInput formControlName="Area" />
              </mat-form-field>
            </div>
            <div class="checkbox-portion row">
              @if(amenityCategories?.length){
              <h2>Amenities</h2>
              <mat-form-field class="col-lg-12">
                <mat-label class="category-head">Category:</mat-label>
                <mat-select (selectionChange)="onCategoryChange($event)">
                  @for (category of amenityCategories; track category) {
                  <mat-option [value]="category 
                  ">{{
                    category.amenityCategoryName
                    }}</mat-option>
                  }
                </mat-select>
              </mat-form-field>
              <div class="col-lg-12">
                <p class="amenities-portion-para">
                  Select amenities included with your property to display them
                  on your listing.
                </p>
              </div>
              @for (amenity of amenities;
              let i =$index;
              track amenity) {
              <div class="col-lg-3 my-2">
                <div class="dCenter check-box justify-content-start gap-2">
                  <input type="checkbox" [id]="'amenity'+amenity?.id"
                    (change)="checkboxSelect($event ,amenity?.id, 'Amenities')" />
                  <label [for]="'amenity'+amenity?.id">{{ amenity?.amenityName }}</label>
                </div>
              </div>
              }
              }
              @if(utilities?.length){
              <h2 class="mt-3">Utilities</h2>
              <p class="right-portion-para">
                Select any utilities in the price of rent.
              </p>
              @for (utility of utilities;
              let i =$index;
              track utility) {
              <div class="col-lg-3 my-2">
                <div class="dCenter check-box justify-content-start gap-2">
                  <input type="checkbox" [id]="'utility'+utility?.id"
                    (change)="checkboxSelect($event ,utility?.id,'Utilities')" />
                  <label [for]="'utility'+utility?.id">{{ utility?.utilityName }}</label>
                </div>
              </div>
              }
              }
            </div>
            @if(previousData?.active == 'rent'){
            <div id="rent-special">
              <h2 class="mt-3">Rent Specials</h2>
              <p class="right-portion-para">
                Enter any rent specials you wish to offer prospective renters.
              </p>
              <div formGroupName="RentSpecial" class="row">
                <mat-form-field class="col-lg-4">
                  <mat-label>Rent Special Title</mat-label>
                  <input matInput formControlName="Title" />
                </mat-form-field>
                <mat-form-field class="col-lg-4">
                  <input matInput [matDatepicker]="startPicker" placeholder="Start Date" formControlName="StartDate" />
                  <mat-datepicker-toggle matSuffix [for]="startPicker"></mat-datepicker-toggle>
                  <mat-datepicker #startPicker></mat-datepicker>
                </mat-form-field>
                <mat-form-field class="col-lg-4">
                  <input matInput [matDatepicker]="endPicker" placeholder="End Date" [min]="startDate"
                    formControlName="EndDate" />
                  <mat-datepicker-toggle matSuffix [for]="endPicker"></mat-datepicker-toggle>
                  <mat-datepicker #endPicker></mat-datepicker>
                </mat-form-field>
                <div class="col-lg-12 special-tags">Special Offers:</div>
                <div class="col-lg-4 my-3">
                  <div class="dCenter check-box justify-content-start gap-2">
                    <input type="radio" id="1 Month Free" formControlName="Tag" value="1 Month Free" />
                    <label for="1 Month Free">1 Month Free</label>
                  </div>
                </div>
                <div class="col-lg-4 my-3">
                  <div class="dCenter check-box justify-content-start gap-2">
                    <input type="radio" id="50% Off" formControlName="Tag" value="50% Off" />
                    <label for="50% Off">50% Off</label>
                  </div>
                </div>
                <div class="col-lg-4 my-3">
                  <div class="dCenter check-box justify-content-start gap-2">
                    <input type="radio" id="Free Move-in" formControlName="Tag" value="Free Move-in" />
                    <label for="Free Move-in">Free Move-in</label>
                  </div>
                </div>
                <mat-form-field class="col-lg-12 my-3">
                  <mat-label>Custom Offer</mat-label>
                  <input matInput formControlName="Tag" appCharacterLimit [limit]="10" />
                </mat-form-field>
              </div>
            </div>
            }
            <div id="Pet-policy">
              <h2 class="mt-3">Pet Policy</h2>
              <div class="row">
                <div class="col-lg-3 my-2">
                  <div class="dCenter check-box justify-content-start gap-2">
                    <input type="radio" formControlName="PetPolicy" value="Cat" id="policyCat" />
                    <label for="policyCat">Cat</label>
                  </div>
                </div>
                <div class="col-lg-3 my-2">
                  <div class="dCenter check-box justify-content-start gap-2">
                    <input type="radio" formControlName="PetPolicy" value="Dog" id="policyDog" />
                    <label for="policyDog">Dog</label>
                  </div>
                </div>
                <div class="col-lg-3 my-2">
                  <div class="dCenter check-box justify-content-start gap-2">
                    <input type="radio" formControlName="PetPolicy" value="Both" id="policyBoth" />
                    <label for="policyBoth">Both</label>
                  </div>
                </div>
              </div>
            </div>
            <div id="laundry">
              <h2 class="mt-3">Laundry</h2>
              <div class="row">
                <div class="col-lg-3 my-2">
                  <div class="dCenter check-box justify-content-start gap-2">
                    <input type="radio" formControlName="Laundry" id="Laundry1" value="Washer/Dryer-In Unit" />
                    <label for="Laundry1">Washer/Dryer-In Unit</label>
                  </div>
                </div>
                <div class="col-lg-3 my-2">
                  <div class="dCenter check-box justify-content-start gap-2">
                    <input type="radio" formControlName="Laundry" id="Laundry2" value="Washer/Dryer Hookup" />
                    <label for="Laundry2">Washer/Dryer Hookup</label>
                  </div>
                </div>
              </div>
            </div>
            <div id="gallery">
              <h2 class="mt-3">Gallery</h2>
              <p class="text-start">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit ut
                aliquam, purus sit amet luctus venenatis, lectus magna fringilla
                urna, porttitor.
              </p>
              <div class="upload-container">
                @if (propertyAddForm.controls['PropertyImageFiles'].length > 0) {
                <div>
                  <p class="text-start bold">Selected Images ({{ propertyAddForm.controls['PropertyImageFiles'].length
                    }}/10)</p>
                  <div class="image-preview-container dCenter justify-content-start flex-wrap gap-3">
                    @for (file of propertyAddForm.controls['PropertyImageFiles'].value; track file; let i = $index) {
                    <div class="image-preview display">
                      <img [src]="file" alt="images" />
                      <button mat-fab color="warn" (click)="removePropertyImage(i)">
                        <mat-icon>delete</mat-icon>
                      </button>
                    </div>
                    }
                  </div>
                </div>
                }

                <div class="row align-items-center mt-3">
                  <div class="col-lg-8">
                    <button [disabled]="propertyAddForm.controls['PropertyImageFiles'].length == 10" class="upload-imgs"
                      (click)="fileInput.click()">
                      <span>Browse Photo</span>
                    </button>
                  </div>
                  <div class="col-lg-4">
                    <div class="upload-btn">
                      <button mat-raised-button color="primary"
                        [disabled]="propertyAddForm.controls['PropertyImageFiles'].length == 10"
                        (click)="fileInput.click()">
                        <mat-icon>cloud_upload</mat-icon>
                        Upload Photos
                      </button>
                      <input type="file" #fileInput multiple
                        [readonly]="propertyAddForm.controls['PropertyImageFiles'].length == 10"
                        (change)="onPropertyImageSelected($event)" style="display: none" />
                    </div>
                  </div>
                </div>
                <div class="upload-mess">
                  <ul class="bullets">
                    <li>
                      The maximum photo size is 8 MB. Formats: jpeg, jpg, webp.
                      Put the main picture first
                    </li>
                    <li>Maximum number of files upload will be 10 files.</li>
                    <li>Photo uploaded successfully</li>
                  </ul>
                </div>
              </div>
            </div>
            <div id="videos">
              <h2 class="mt-3">Videos</h2>
              <p class="text-start">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit ut
                aliquam, purus sit amet luctus venenatis, lectus magna fringilla
                urna, porttitor.
              </p>
              <div class="row">
                <mat-form-field class="col-lg-12">
                  <mat-label>Enter Video Link</mat-label>
                  <input matInput formControlName="VideoUrl" />
                </mat-form-field>
              </div>
            </div>
            <div id="contact-info">
              <h2 class="mt-3">Contact Information</h2>
              <p class="text-start">
                Enter your contact information so can renters reach you about your
                listing.
              </p>
              <div formGroupName="PropertyContact" class="row">
                <mat-form-field class="col-lg-6 mt-3">
                  <mat-label>Full Name</mat-label>
                  <input matInput formControlName="FullName" />
                </mat-form-field>
                <mat-form-field class="col-lg-6 mt-3">
                  <mat-label>Email</mat-label>
                  <input matInput formControlName="Email" />
                </mat-form-field>
                <mat-form-field class="col-lg-6 mt-3">
                  <mat-label>Phone</mat-label>
                  <input matInput formControlName="Contact" />
                </mat-form-field>
                <mat-form-field class="col-lg-6 mt-3">
                  <mat-label>Contact Prefrence</mat-label>
                  <mat-select formControlName="IsEmailPrefered">
                    <mat-option value="option1">Phone</mat-option>
                    <mat-option value="option2">Email</mat-option>
                  </mat-select>
                </mat-form-field>
                <div class="contact-role">Role</div>
                <div class="col-lg-4 my-2">
                  <div class="dCenter check-box justify-content-start gap-2">
                    <input type="radio" formControlName="UserRole" value="Owner" id="role1" />
                    <label for="role1">Owner</label>
                  </div>
                </div>
                <div class="col-lg-4 my-2">
                  <div class="dCenter check-box justify-content-start gap-2">
                    <input type="radio" formControlName="UserRole" value="Broker" id="role2" />
                    <label for="role2">Broker</label>
                  </div>
                </div>
                <div class="col-lg-4 my-2">
                  <div class="dCenter check-box justify-content-start gap-2">
                    <input type="radio" formControlName="UserRole" value="Property Manager" id="role3" />
                    <label for="role3">Property Manager</label>
                  </div>
                </div>
              </div>
            </div>
            <div id="videos">
              <h2 class="mt-3">Description</h2>
              <p class="text-start">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit ut
                aliquam, purus sit amet luctus venenatis, lectus magna fringilla
                urna, porttitor.
              </p>
              <div class="row">
                <mat-form-field class="col-lg-12">
                  <mat-label>Autosize textarea</mat-label>
                  <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" formControlName="Description"
                    cdkAutosizeMinRows="11" cdkAutosizeMaxRows="15"></textarea>
                </mat-form-field>
              </div>
            </div>
            <div id="floor-plans">
              <h2 class="mt-3">Floor Plans</h2>
              <p class="text-start">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit ut
                aliquam, purus sit amet luctus venenatis, lectus magna fringilla
                urna, porttitor.
              </p>
              <div formArrayName="FloorPlans">
                @for (plan of propertyAddForm.get('FloorPlans').controls;
                let i = $index; track plan) {
                <div [formGroupName]="i" class="row">
                  <mat-form-field class="col-lg-12">
                    <mat-label>Plan Name</mat-label>
                    <input matInput formControlName="PlanName" />
                  </mat-form-field>
                  <mat-form-field class="col-lg-4">
                    <mat-label>No. of Bedrooms</mat-label>
                    <input matInput formControlName="NoOfBed" />
                  </mat-form-field>
                  <mat-form-field class="col-lg-4">
                    <mat-label>No. of Bathrooms</mat-label>
                    <input matInput formControlName="NoOfBath" />
                  </mat-form-field>
                  <mat-form-field class="col-lg-4">
                    <mat-label>Sqft</mat-label>
                    <input matInput formControlName="Area" />
                  </mat-form-field>
                  <mat-form-field class="col-lg-6">
                    <mat-label>Start Price</mat-label>
                    <input matInput formControlName="StartPrice" />
                  </mat-form-field>
                  <mat-form-field class="col-lg-6">
                    <mat-label>End Price</mat-label>
                    <input matInput formControlName="EndPrice" />
                  </mat-form-field>
                  <mat-form-field class="col-lg-12">
                    <mat-label>Enter Description of Property</mat-label>
                    <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="11"
                      cdkAutosizeMaxRows="15" formControlName="Description"></textarea>
                  </mat-form-field>
                  <div class="upload-container">
                    @if(plan.get('FloorPlanImage').value.length > 0){
                    <div>
                      <p class="text-start bold">Selected Images ({{ plan.get('FloorPlanImage').value.length }}/10)</p>
                      <div class="image-preview-container dCenter justify-content-start flex-wrap gap-3">
                        @for (item of plan.get('FloorPlanImage').value; let j = $index; track $item) {}
                        <div class="image-preview display">
                          <img [src]="file" alt="images" />
                          <button mat-fab color="warn" (click)="removeFloorPlanImage(i, j)">
                            <mat-icon>delete</mat-icon>
                          </button>
                        </div>
                      </div>
                    </div>}
                    <div class="row align-items-center mt-3">
                      <div class="col-lg-8">
                        <button [disabled]="plan.get('FloorPlanImage').value.length == 10" class="upload-imgs"
                          (click)="fileInput.click()">
                          <span>Browse Photo</span>
                        </button>
                      </div>
                      <div class="col-lg-4">
                        <div class="upload-btn">
                          <button mat-raised-button color="primary"
                            [disabled]="plan.get('FloorPlanImage').value.length == 10" (click)="fileInput.click()">
                            <mat-icon>cloud_upload</mat-icon>
                            Upload Photos
                          </button>
                          <input type="file" #fileInput multiple
                            [readonly]="plan.get('FloorPlanImage').value.length == 10"
                            (change)="onFloorPlanImageSelected($event, i)" style="display: none" />
                        </div>
                      </div>
                    </div>
                    <div class="upload-mess">
                      <ul class="bullets">
                        <li>The maximum photo size is 8 MB. Formats: jpeg, jpg, webp. Put the main picture first</li>
                        <li>Maximum number of files upload will be 10 files.</li>
                        <li>Photo uploaded successfully</li>
                      </ul>
                    </div>
                  </div>
                </div>
                }
                <button class="btnPrimary wow fadeInDown" (click)="addFloorPlan()">
                  Add Floor Plan
                </button>
              </div>
            </div>
            <button class="btnPrimary wow fadeInDown" (click)="onSubmit()">
              Add Property
            </button>
          </form>
          <div class="prop" id="location">
            <h2>Property Location</h2>
            <p>
              Lorem ipsum dolor sit amet, consectetur adipiscing elit ut
              aliquam, purus sit amet luctus venenatis, lectus magna fringilla
              urna, porttitor.
            </p>

            <form action="" class="prop-form">
              <div class="row">
                <mat-form-field class="col-lg-12">
                  <mat-label>Address</mat-label>
                  <input matInput />
                </mat-form-field>
                <mat-form-field class="col-lg-6">
                  <mat-label>Country/State</mat-label>
                  <mat-select [(value)]="selected">
                    <mat-option>None</mat-option>
                    <mat-option value="option1">Option 1</mat-option>
                    <mat-option value="option2">Option 2</mat-option>
                    <mat-option value="option3">Option 3</mat-option>
                  </mat-select>
                </mat-form-field>
                <mat-form-field class="col-lg-6">
                  <mat-label>City</mat-label>
                  <input matInput />
                </mat-form-field>
                <mat-form-field class="col-lg-6">
                  <mat-label>Landmark</mat-label>
                  <input matInput />
                </mat-form-field>
                <mat-form-field class="col-lg-6">
                  <mat-label>Zip Code</mat-label>
                  <input matInput />
                </mat-form-field>
                <div class="col-lg-12">
                  <app-map [mapDraggable]="false" [markerPositions]="[previousData?.latLng]"
                    [center]="previousData?.latLng"></app-map>
                </div>
              </div>
            </form>
          </div>
          <div class="prop">
            <div class="check-box d-flex align-items-Start">
              <input type="checkbox" name="" id="" />
              <label for=""> <span class="terms-text">By checking this box I agree as follows: I agree that I will
                  provide accurate and
                  <a href="">non discriminatory</a> information and I will comply
                  with the Apartments.com <a href="">Terms and Conditions</a> and
                  the <a href="">Add a Property Terms of Service.</a></span></label>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</section>